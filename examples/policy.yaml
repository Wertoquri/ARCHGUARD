rules:
  - id: R-001
    type: forbidden_dependency
    from: domain/**
    to: infrastructure/**
    severity: high

  - id: R-002
    type: max_fan_in
    threshold: 10
    severity: medium

    # Example: whitelist specific modules from this rule
    exempt:
      - src/api.js
      - src/context/I18nContext.jsx

  - id: R-003
    type: no_cycles
    severity: high

  - id: R-004
    type: max_fan_out
    threshold: 12
    severity: medium

  - id: R-005
    type: layer_matrix
    severity: high
    allowSameLayer: true
    layers:
      domain: domain/**
      application: application/**
      infrastructure: infrastructure/**
    allow:
      - from: application
        to: domain
      - from: infrastructure
        to: application
      - from: infrastructure
        to: domain

  # Additional example rules demonstrating common organizational constraints
  - id: R-006
    type: forbidden_dependency
    from: domain/**
    to: application/**
    severity: medium
    message: "Domain layer must not depend directly on application layer"

  - id: R-007
    type: max_fan_in
    threshold: 15
    severity: medium
    # applies broadly, highlights potential bottlenecks
    exempt:
      - src/context/I18nContext.jsx

  - id: R-008
    type: max_fan_out
    threshold: 20
    severity: medium
    # prevents modules from becoming overly chatty

  - id: R-009
    type: layer_matrix
    severity: high
    allowSameLayer: false
    layers:
      domain: domain/**
      application: application/**
      infrastructure: infrastructure/**
    # explicit allowed layer pairs (from -> to)
    allow:
      - from: application
        to: domain
      - from: infrastructure
        to: application

# Global exemptions (whitelist) with reasons
exemptions:
  - pattern: src/api.js
    reason: "Legacy API façade — scheduled for refactor Q2"
  - pattern: src/context/I18nContext.jsx
    reason: "Centralized i18n provider used across UI; reviewed"
